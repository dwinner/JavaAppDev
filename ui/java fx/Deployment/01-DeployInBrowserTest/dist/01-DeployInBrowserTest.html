<html><head>
        <SCRIPT src="./web-files/dtjava.js"></SCRIPT>
        <script>
            function launchApplication(jnlpfile) {
                dtjava.launch(
                {
                    url : '01-DeployInBrowserTest.jnlp',
                    jnlp_content : 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxqbmxwIHNwZWM9IjEuMCIgeG1sbnM6amZ4PSJodHRwOi8vamF2YWZ4LmNvbSIgaHJlZj0iMDEtRGVwbG95SW5Ccm93c2VyVGVzdC5qbmxwIj4NCiAgPGluZm9ybWF0aW9uPg0KICAgIDx0aXRsZT4wMS1EZXBsb3lJbkJyb3dzZXJUZXN0PC90aXRsZT4NCiAgICA8dmVuZG9yPm9yYWNsZV9wcjE8L3ZlbmRvcj4NCiAgICA8ZGVzY3JpcHRpb24+U2FtcGxlIEphdmFGWCAyLjAgYXBwbGljYXRpb24uPC9kZXNjcmlwdGlvbj4NCiAgICA8b2ZmbGluZS1hbGxvd2VkLz4NCiAgPC9pbmZvcm1hdGlvbj4NCiAgPHJlc291cmNlcz4NCiAgICA8amZ4OmphdmFmeC1ydW50aW1lIHZlcnNpb249IjIuMCsiIGhyZWY9Imh0dHA6Ly9qYXZhZGwuc3VuLmNvbS93ZWJhcHBzL2Rvd25sb2FkL0dldEZpbGUvamF2YWZ4LWxhdGVzdC93aW5kb3dzLWk1ODYvamF2YWZ4Mi5qbmxwIi8+DQogIDwvcmVzb3VyY2VzPg0KICA8cmVzb3VyY2VzPg0KICAgIDxqMnNlIHZlcnNpb249IjEuNisiIGhyZWY9Imh0dHA6Ly9qYXZhLnN1bi5jb20vcHJvZHVjdHMvYXV0b2RsL2oyc2UiLz4NCiAgICA8amFyIGhyZWY9IjAxLURlcGxveUluQnJvd3NlclRlc3QuamFyIiBzaXplPSIxNjY2NiIgZG93bmxvYWQ9ImVhZ2VyIiAvPg0KICA8L3Jlc291cmNlcz4NCiAgPGFwcGxldC1kZXNjICB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgbWFpbi1jbGFzcz0iY29tLmphdmFmeC5tYWluLk5vSmF2YUZYRmFsbGJhY2siICBuYW1lPSIwMS1EZXBsb3lJbkJyb3dzZXJUZXN0IiA+DQogICAgPHBhcmFtIG5hbWU9InJlcXVpcmVkRlhWZXJzaW9uIiB2YWx1ZT0iMi4wKyIvPg0KICA8L2FwcGxldD4NCiAgPGpmeDpqYXZhZngtZGVzYyAgd2lkdGg9IjgwMCIgaGVpZ2h0PSI2MDAiIG1haW4tY2xhc3M9InBrZzAxLmRlcGxveWluYnJvd3NlcnRlc3QuRGVwbG95SW5Ccm93c2VyVGVzdCIgIG5hbWU9IjAxLURlcGxveUluQnJvd3NlclRlc3QiIC8+DQogIDx1cGRhdGUgY2hlY2s9ImFsd2F5cyIvPg0KPC9qbmxwPg0K'
                },
                {
                    javafx : '2.0+'
                },
                {}
            );
                return false;
            }
        </script>

        <script>
            function reportError(app, r)
            {
                // Перезапись поведения для неподдержмваемых платформ
                var a = app.placeholder;
                if (a != null && r.isUnsupportedBrowser()){
                    var p = document.createElement('div');
                    p.id = "splash";
                    p.style.width  = app.width;
                    p.style.height = app.height;
                    p.style.background="red";
                    p.appendChild(document.createTextNode("This browser is not supported."));
 
                    //clear applet placeholder
                    while (a.hasChildNodes()) a.removeChild(a.firstChild);
 
                    //show custom message
                    a.appendChild(p);
                }
                else {
                    //use default handlers otherwise
                    var def = new dtjava.Callbacks();
                    return def.onDeployError(app, r);
                }
            }
            
            function getSplash(app)
            {
                // Свой splash - зеленый прямоугольник
                var p = document.createElement('div');
                p.style.width = app.width;
                p.style.height = app.width;
                p.style.background = "green";
                return p;
            }
            
            function javafxEmbed()
            {
                dtjava.embed(
                    {                        
                        url : '01-DeployInBrowserTest.jnlp',
                        placeholder : 'javafx-app-placeholder',
                        width : 800,
                        height : 600,
                        jnlp_content : 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxqbmxwIHNwZWM9IjEuMCIgeG1sbnM6amZ4PSJodHRwOi8vamF2YWZ4LmNvbSIgaHJlZj0iMDEtRGVwbG95SW5Ccm93c2VyVGVzdC5qbmxwIj4NCiAgPGluZm9ybWF0aW9uPg0KICAgIDx0aXRsZT4wMS1EZXBsb3lJbkJyb3dzZXJUZXN0PC90aXRsZT4NCiAgICA8dmVuZG9yPm9yYWNsZV9wcjE8L3ZlbmRvcj4NCiAgICA8ZGVzY3JpcHRpb24+U2FtcGxlIEphdmFGWCAyLjAgYXBwbGljYXRpb24uPC9kZXNjcmlwdGlvbj4NCiAgICA8b2ZmbGluZS1hbGxvd2VkLz4NCiAgPC9pbmZvcm1hdGlvbj4NCiAgPHJlc291cmNlcz4NCiAgICA8amZ4OmphdmFmeC1ydW50aW1lIHZlcnNpb249IjIuMCsiIGhyZWY9Imh0dHA6Ly9qYXZhZGwuc3VuLmNvbS93ZWJhcHBzL2Rvd25sb2FkL0dldEZpbGUvamF2YWZ4LWxhdGVzdC93aW5kb3dzLWk1ODYvamF2YWZ4Mi5qbmxwIi8+DQogIDwvcmVzb3VyY2VzPg0KICA8cmVzb3VyY2VzPg0KICAgIDxqMnNlIHZlcnNpb249IjEuNisiIGhyZWY9Imh0dHA6Ly9qYXZhLnN1bi5jb20vcHJvZHVjdHMvYXV0b2RsL2oyc2UiLz4NCiAgICA8amFyIGhyZWY9IjAxLURlcGxveUluQnJvd3NlclRlc3QuamFyIiBzaXplPSIxNjY2NiIgZG93bmxvYWQ9ImVhZ2VyIiAvPg0KICA8L3Jlc291cmNlcz4NCiAgPGFwcGxldC1kZXNjICB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgbWFpbi1jbGFzcz0iY29tLmphdmFmeC5tYWluLk5vSmF2YUZYRmFsbGJhY2siICBuYW1lPSIwMS1EZXBsb3lJbkJyb3dzZXJUZXN0IiA+DQogICAgPHBhcmFtIG5hbWU9InJlcXVpcmVkRlhWZXJzaW9uIiB2YWx1ZT0iMi4wKyIvPg0KICA8L2FwcGxldD4NCiAgPGpmeDpqYXZhZngtZGVzYyAgd2lkdGg9IjgwMCIgaGVpZ2h0PSI2MDAiIG1haW4tY2xhc3M9InBrZzAxLmRlcGxveWluYnJvd3NlcnRlc3QuRGVwbG95SW5Ccm93c2VyVGVzdCIgIG5hbWU9IjAxLURlcGxveUluQnJvd3NlclRlc3QiIC8+DQogIDx1cGRhdGUgY2hlY2s9ImFsd2F5cyIvPg0KPC9qbmxwPg0K'
                    },
                    {
                        jvm: "1.6.0+",
                        javafx : '2.0+'
                    },
                    {
                        onGetSplash: getSplash,
                        onDeployError: reportError
                    }
                );
            }
            <!-- Embed FX application into web page once page is loaded -->
            dtjava.addOnloadCallback(javafxEmbed);
        </script>

    </head><body>
        <h2>Test page for <b>01-DeployInBrowserTest</b></h2>
        <b>Webstart:</b>
        <a href='01-DeployInBrowserTest.jnlp'
           onclick="return launchApplication('01-DeployInBrowserTest.jnlp');">
                click to launch this app as webstart
        </a><br /><hr /><br />

        <!-- Applet will be inserted here -->
        <div id='javafx-app-placeholder'></div>
    </body></html>
